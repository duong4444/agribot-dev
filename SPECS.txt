Context: 1. Mục tiêu đề tài
Xây dựng chatbot có khả năng:
-	Hỏi – đáp kiến thức nông nghiệp: cung cấp thông tin về cây trồng, kỹ thuật trồng trọt.
-	Hỗ trợ tưới tiêu & chăm sóc cây trồng: kết nối với hệ thống IoT (cảm biến độ ẩm, nhiệt độ, ánh sáng) để tương tác điều khiển tưới, truy vấn dữ liệu cảm biến thời gian thực
-	Quản lý dữ liệu nông trại: ghi nhận, lưu trữ và phân tích dữ liệu sản xuất (thời gian gieo trồng, phân bón,...).
2. Nội dung nghiên cứu
2.1. Chatbot hỏi – đáp nông nghiệp
-	Xây dựng cơ sở dữ liệu kiến thức: thông tin cây trồng, kỹ thuật trồng các loại cây, lịch mùa vụ.
-	Tích hợp chatbot hỗ trợ trả lời bằng ngôn ngữ tự nhiên (tiếng Việt).
-	Cho phép user nhập câu hỏi bằng tin nhắn văn bản.
2.2. Hỗ trợ tưới tiêu & chăm sóc (IoT)
Triển khai hệ thống IoT trong nông trại:
-	Cảm biến độ ẩm đất.
-	Cảm biến nhiệt độ, ánh sáng.
-	Bộ điều khiển bơm nước.
Chatbot có thể:
-	Hiển thị dữ liệu cảm biến theo thời gian thực.
-	Tự động điều khiển tưới khi User cho phép.
- 	Tương tác với IOT ví dụ bật tắt máy bơm, đèn
2.3. Quản lý dữ liệu nông trại
-	Xây dựng dashboard quản lý
-	Lưu lịch sử gieo trồng, bón phân, phun thuốc,...
-	Theo dõi chi phí – lợi nhuận.
+) NGHIỆP VỤ HỆ THỐNG
1. Tác nhân (Actors)
-	User(Mỗi user chỉ được sở hữu 1 nông trại): sử dụng chatbot để hỏi đáp, theo dõi và điều khiển IOT (qua chatbot hoặc thủ công bằng panel UI ví dụ các button bật,tắt,...), đăng ký gói subscription.
-	Chatbot: giao tiếp với User qua văn bản
-	Hệ thống IoT: cảm biến (nhiệt độ, độ ẩm, ánh sáng), bộ điều khiển tưới.
-	CSDL (Database): lưu trữ dữ liệu nông trại, dữ liệu IoT, kiến thức nông nghiệp.
-	Quản trị viên: cập nhật dữ liệu kiến thức nông nghiệp, quản lý,phân quyền tài khoản, cấu hình hệ thống, cấu hình IOT, quản lý gói đăng ký, xác thực nông trại
2. Nghiệp vụ chính
2.1. Hỏi – đáp kiến thức nông nghiệp
-	Mục tiêu: Cung cấp thông tin cây trồng, kỹ thuật canh tác, mùa vụ.
-	Luồng nghiệp vụ:
-	User đặt câu hỏi cho chatbot
-	Chatbot NLP phân tích câu hỏi → xác định intent & NER.
-	Backend truy vấn CSDL kiến thức hoặc AI model để tìm câu trả lời.
-	Chatbot phản hồi lại.
2.2. Hỗ trợ tưới tiêu & chăm sóc (IoT)
-	Mục tiêu: Giám sát dữ liệu cảm biến và điều khiển tưới tiêu.
-	Luồng nghiệp vụ (Truy vấn dữ liệu):
-	User: “Độ ẩm đất hiện tại bao nhiêu?”
-	Chatbot NLP → intent = sensor_query.
-	Backend lấy dữ liệu mới nhất từ MQTT/Database IoT.
Chatbot phản hồi: “Độ ẩm 32%, nên tưới thêm 5 phút.”
-	Luồng nghiệp vụ (Điều khiển tưới):
User: “Bật bơm 10 phút.”
Chatbot NLP → intent = device_control.
Backend publish lệnh pump/control=ON 10min qua MQTT.
Thiết bị nhận lệnh → bật bơm.
Thiết bị gửi trạng thái → Backend lưu DB.
Chatbot xác nhận: “Đã bật bơm 10 phút.”
2.3. Quản lý dữ liệu nông trại
-	Mục tiêu: Lưu trữ, theo dõi và báo cáo dữ liệu sản xuất.
Nghiệp vụ chính:
-	Ghi nhận dữ liệu:
User nhập thông tin: gieo trồng, phân bón, thuốc, thu hoạch,...
-	Hệ thống lưu vào database.
-	Truy vấn dữ liệu:
Người dùng: “Chi phí tháng này là bao nhiêu?”
Backend tổng hợp từ DB → chatbot trả lời: “Chi phí là 2,450,000 VNĐ.”
3. Nghiệp vụ phụ trợ
-	Quản trị dữ liệu kiến thức: Admin thêm/sửa/xoá nội dung nông nghiệp.
-	Đăng nhập & phân quyền: User đăng nhập vào hệ thống để truy cập dữ liệu riêng của nông trại mình.
======================
Mô tả hệ thống hiện tại
Đã triển khai 1 service python sẽ nhận user's prompt và trả về phân loại intent & NER .
Với intent: knowledge_query, device_control, sensor_query, financial_query, unknown.
Với knowledge_query(xử lý 3 tầng, tầng 1: exact match & full-text search, tầng 2(nếu tầng 1 không có kết quả): RAG, tầng 3(tầng 1,2 đều fail): fallback LLM trả lời) và unknown(sẽ gọi thằng LLM trả lời) thì sẽ phân ra là hỏi đáp , device_query,sensor_query,financial_query sẽ được phân là action. 
Với NER : 
- date(phải nhận dạng được để phục vụ cho financial_query, chỉ focus vào tổng doanh thu và tổng chi phí còn cụ thể ví dụ "chi phí/doanh thu cho phân bón là bao nhiêu" sẽ bỏ qua, còn kiểu "doanh thu/chi phí {date} là bao nhiêu" sẽ handle): tháng này,tháng trước,năm nay,năm ngoái,quý 1,quý 2, quý 3, quý 4, tháng 1, tháng 2 ,tháng 3, tháng 4, tháng 5, tháng 6, tháng 7, tháng 8,  tháng 9, tháng 10, tháng 11, tháng 12. 
- crop_name(Tên cây trồng phục vụ cho knowledge_query vì tôi dùng RAG , lưu file kiến thức theo loại cây kiểu cam_sanh.md, lua_st25.md,...): bưởi da xanh, cam sành, lúa ST25, xoài cát chu,... 
- farm_area(phục vụ cho sensor_query và device_query kiểu hỏi "độ ẩm ở khu {x} là bao nhiêu" , "bật máy bơm ở khu {x}"): "khu A", "khu B", "khu C", "khu 1", "khu 2", "khu {x}" x có thể là ABCDEF1234567....
- duration(phục vụ cho device_query kiểu hỏi "bật máy bơm ở khu {x} trong {y} phút/giờ/"): 5 phút, 10 phút, 1 giờ, "{y} phút/giờ" y có thể là 1,2,3,4,5,6,...
- device_name(phục vụ cho device_query kiểu "bật {device_name} trong 5 phút"): máy bơm,đèn,...
- sensor_type(phục vụ cho sensor_query kiểu  "{sensor_type} ở khu A là bao nhiêu"): nhiệt độ, ánh sáng, độ ẩm,...
ví dụ : chi phí {date} là bao nhiêu? - financial_query
bật {device_name} ở {farm_area} trong {duration} phút? - device_control
{sensor_type} ở {farm_area} đang là bao nhiêu? - sensor_query

Về luồng hỏi đáp kiến thức nông nghiệp thì tôi đã làm xong rồi , giờ tập trung vào nghiệp vụ liên quan đến farm và IOT (hiện tại tôi vẫn chưa biết triển khai như thế nào, nghiệp vụ như thế nào).
UC đăng ký,quên mật khẩu,đăng xuất(xong)
UC đăng nhập(xong) : check trường role , nếu role là user thì display UI dành cho user, còn role là admin thì direct đến /admin 
Hiện tại admin đã có chức năng quản lý tài liệu
Hiện tại User mới chỉ có thể hỏi đáp kiến thức nông nghiệp.
